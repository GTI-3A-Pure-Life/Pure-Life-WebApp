<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Detalles Alumno</title>
    <link rel="stylesheet" href="css/estilos.css">
</head>
<body>
    <h1 id="titulo-alumno">Alumno: </h1>
    <div id="carga"></div>
    <div id="error"></div>
    <div id="contenedor-asignatruas-matriculadas" class="contenedor">
        <form id="forumlarioCrearMatriculacion" 
        onsubmit="ControladorMatriculaciones.iniciarInsertarMatriculacion(event)">
            <h2>Matricualar al alumno en una asignatura nueva</h2>
            <div>
                <label for="select-asignaturas">Matricualar el alumno en: </label>
                <select name="asignatruas" id="select-asignaturas">
                    <option value="-1">Seleccione una asignatura</option>
                </select>
                <button type="submit">Matricular</button>
            </div>
        </form>
        <h2>Asignaturas matriculadas</h2>
        <p>Codigo | Nombre</p>
        <ul id="lista-asignatruas-matriculadas" class="lista-elementos"></ul>
    
        
        
    </div>

    <div id="snackbar"></div>
    <div id="snackbarError"></div>


    
    <script src="logica/LogicaFalsa.js"></script>
    <script src="logica/mvc-matriculacion.js"></script>

    <script>

        let alumno = JSON.parse(localStorage.getItem("persona-ver-detalles"))
        let asignaturas = JSON.parse(localStorage.getItem("lista-asignaturas-ver-detalles"))

        VistaMatriculaciones.preparar("contenedor-asignatruas-matriculadas","lista-asignatruas-matriculadas","carga","error","snackbarError","forumlarioCrearMatriculacion",
                                "snackbar");
        ControladorMatriculaciones.iniciarObtenerMatriculacionesPorApellido(alumno.apellidos);


      

        // cambiar titulo de la pagina
        document.getElementById("titulo-alumno").innerHTML += alumno.nombre


        let optionsHtml = "";

        // rellenamos el select de asignaturas
        asignaturas.forEach(element => {
            optionsHtml += "<option value='"+ element.codigo +"'>"+ element.nombre +"</option>"
        });

        // a√±adir las opciones al select
        document.getElementById("select-asignaturas").innerHTML += optionsHtml;

        
    </script>
</body>
</html>